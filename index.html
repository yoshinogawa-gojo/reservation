<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>レストランよしの川 - 予約サイト</title>
    <link rel="stylesheet" href="base.css">
    <link rel="stylesheet" href="components.css">
    <link rel="stylesheet" href="pages.css">
    <link rel="stylesheet" href="responsive.css">
    <link rel="stylesheet" href="storage.css">
</head>
<body>
    <div class="main-header">
        <div class="header-content">
            <a href="https://yoshinogawa-gojo.jp/" target="_blank" class="header-logo">
                <img src="yunokinosato.png" alt="柚木の湯 ロゴ" onerror="this.style.display='none'" class="logo-image">
            </a>
            <a href="https://maps.google.com/?q=〒637-0031 奈良県五條市小島町449-1" target="_blank" class="header-map-button">
                📍 Google Mapで見る
            </a>
        </div>
    </div>
    
    <div class="wave-decoration"></div>
    
    <!-- 人数選択ページ（初期表示） -->
    <div id="guest-count-page" class="page active">
        <div class="container">
            <div class="page-header">
                <div class="page-title">ご利用人数を選択してください</div>
            </div>

            <div class="guest-count-section">
                <div id="guest-count-grid" class="guest-count-grid">
                    <!-- 人数選択ボタンがJavaScriptで生成されます -->
                </div>
            </div>
            
            <!-- 次へボタンを追加 -->
            <button class="next-button" id="guest-next-button" onclick="goToDatetimePage()">次へ</button>
        </div>
    </div>

    <!-- 日時選択ページ -->
    <div id="datetime-page" class="page">
        <div class="container">
            <div class="page-header">
                <div class="page-title">日時を選択してください</div>
            </div>

            <div class="calendar-container">
                <div class="calendar-header">
                    <button class="calendar-nav" onclick="changeMonth(-1)">◀</button>
                    <div class="month-year" id="month-year"></div>
                    <button class="calendar-nav" onclick="changeMonth(1)">▶</button>
                </div>
                <div class="calendar-wrapper">
                    <div class="calendar-grid" id="calendar-grid"></div>
                </div>
            </div>

            <div id="time-slots-container" class="time-slots-container">
                <h3 class="time-selection-title">時間を選択してください</h3>
                <div class="time-slots" id="time-slots"></div>
            </div>

            <div class="button-group">
                <button class="back-button" onclick="goToGuestCountPage()">戻る</button>
                <button class="next-button" id="datetime-next-button" onclick="goToSeatPage()">次へ</button>
            </div>
        </div>
    </div>

    <!-- 座席選択ページ -->
    <div id="seat-page" class="page">
        <div class="container">
            <div class="page-header">
                <div class="page-title">座席を選択してください</div>
            </div>

            <div class="seat-section">
                <div id="seat-grid" class="seat-grid">
                    <div class="loading">座席情報を読み込んでいます...</div>
                </div>
            </div>

            <div class="button-group">
                <button class="back-button" onclick="goToDatetimePage()">戻る</button>
                <button class="next-button" id="seat-next-button" onclick="goToInfoPage()">次へ</button>
            </div>
        </div>
    </div>

    <!-- 情報入力ページ -->
    <div id="info-page" class="page">
        <div class="container">
            <div class="page-header">
                <div class="page-title">代表者情報を入力してください</div>
            </div>

            <div class="form-container">
                <div class="form-group">
                    <label class="form-label">お名前 *</label>
                    <input type="text" class="form-input" id="last-name" placeholder="例：山田太郎" required>
                </div>
                <div class="form-group">
                    <label class="form-label">電話番号 *</label>
                    <input type="number" class="form-input" id="first-name" placeholder="例：09012345678" required pattern="[0-9]*" inputmode="numeric">
                </div>
                <div class="form-group">
                    <label class="form-label">メールアドレス *</label>
                    <input type="email" class="form-input" id="email" placeholder="example@email.com" required>
                </div>

                <div class="button-group">
                    <button class="back-button" onclick="goToSeatPage()">戻る</button>
                    <button class="confirm-button" onclick="goToConfirmPage()">確認</button>
                </div>
            </div>
        </div>
    </div>

    <!-- 確認ページ -->
    <div id="confirm-page" class="page">
        <div class="container">
            <div class="page-header">
                <div class="page-title">予約内容を確認してください</div>
            </div>

            <div class="confirmation-section">
                <div class="confirmation-title">予約情報</div>
                <div id="confirmation-details"></div>
            </div>

            <div class="reservation-notes">
                <h4>予約に関する注意事項</h4>
                <ul>
                    <li>予約受付締切：前日の23:59まで</li>
                    <li>キャンセル締切：1時間前まで</li>
                </ul>
            </div>

            <div class="important-agreement">
                <h4>重要なお願い</h4>
                <div class="agreement-text">
                    ※ご予約時間はあくまで目安となります。<br>
                    お食事の準備により、開始時間が前後する場合がございますので、恐れ入りますが、ご予約時間の5分前までにお越しください。<br>
                    また、ご予約時間を過ぎてもご来店が確認できない場合は、次のお客様をご案内させていただくことがございますので、予めご了承ください。
                </div>
                <div class="agreement-checkbox">
                    <label class="checkbox-container">
                        <input type="checkbox" id="agreement-checkbox">
                        <span class="checkmark"></span>
                        上記の内容に同意します
                    </label>
                </div>
            </div>

            <div class="button-group">
                <button class="back-button" onclick="goToInfoPage()">戻る</button>
                <button class="confirm-button" id="submit-button" onclick="submitReservation()" disabled>予約する</button>
            </div>
        </div>
    </div>

    <!-- 完了ページ -->
    <div id="completion-page" class="page">
        <div class="container">
            <div class="completion-container">
                <div class="completion-title">予約が完了しました</div>
                <div class="reservation-number" id="completion-reservation-number"></div>
                <div id="completion-details"></div>
                <div class="completion-message">
                    この度はご予約ありがとうございます。<br>
                    ご指定のメールアドレスにご予約の確認メールを送信しました。<br>
                    お客様のご来店を心よりお待ちしております。
                </div>
                
                <div class="email-notice">
                    <div class="email-notice-icon">📧</div>
                    <div class="email-notice-text">
                        予約完了メールが迷惑メールフォルダに入る場合がございます。<br>
                        届かない場合はそちらもご確認ください。
                    </div>
                </div>
                <a href="https://hairworksten.github.io/reservation-conference" target="_blank" class="check-reservation-button">
                    ご予約の確認・変更はこちらから
                </a>
            </div>
        </div>
    </div>

    <script src="config.js"></script>
    <script src="api.js"></script>
    <script src="ui.js"></script>
    <script src="storage.js"></script>
    <script src="main.js"></script>
</body>
</html>
